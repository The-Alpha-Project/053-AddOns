<Ui xmlns="http://www.blizzard.com/wow/ui/">
    <Script file="ExtendedStats.lua"/>

    <Frame name="ExtendedStatsFrame" parent="PaperDollFrame" hidden="false" frameStrata="DIALOG">
        <Size>
            <AbsDimension x="160" y="433"/>
        </Size>
        <Anchors>
            <Anchor point="LEFT" relativeTo="PaperDollFrame" relativePoint="RIGHT">
                <Offset>
                    <AbsDimension x="-35" y="30"/>
                </Offset>
            </Anchor>
        </Anchors>

        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background"
                  edgeFile="Interface\Tooltips\UI-Tooltip-Border"
                  tile="true" tileSize="16" edgeSize="16">
            <BackgroundInsets>
                <AbsInset left="5" right="5" top="5" bottom="5"/>
            </BackgroundInsets>
        </Backdrop>

        <Frames>
            <ScrollFrame name="ExtendedStatsScrollFrame" inherits="UIPanelScrollFrameTemplate">
                <Size>
                    <AbsDimension x="120" y="410"/> <!-- Slightly smaller to fit scrollbar inside -->
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT">
                        <Offset>
                            <AbsDimension x="10" y="-10"/>
                        </Offset>
                    </Anchor>
                </Anchors>

                <ScrollChild>
                    <Frame name="ExtendedStatsScrollChild">
                        <Size>
                          <AbsDimension x="120" y="665"/> <!-- Scrollable height -->
                        </Size>
                        <Layers>
                            <Layer level="OVERLAY">
                                <FontString name="ExtendedStatsFrameText" inherits="GameFontNormal" justifyH="LEFT">
                                    <Size>
                                        <AbsDimension x="120" y="665"/> <!-- Match ScrollChild -->
                                    </Size>
                                    <Anchors>
                                        <Anchor point="TOPLEFT"/>
                                    </Anchors>
                                </FontString>
                            </Layer>
                        </Layers>
                    </Frame>
                </ScrollChild>
            </ScrollFrame>

             <!-- Close Button -->
            <Button name="ExtendedStatsCloseButton" inherits="UIPanelCloseButton">
                <Anchors>
                    <Anchor point="TOPRIGHT">
                        <Offset>
                            <AbsDimension x="-17" y="-2"/> <!-- Just left of scrollbar area -->
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        ExtendedStatsFrame:Hide();
                    </OnClick>
                </Scripts>
            </Button>
        </Frames>

        <Scripts>
            <OnLoad>
                this:RegisterEvent("PLAYER_ENTERING_WORLD");
                this:RegisterEvent("UNIT_STATS");
                this:RegisterEvent("UNIT_INVENTORY_CHANGED");
                this:RegisterEvent("UNIT_DEFENSE");
            </OnLoad>
            <OnEvent>
                ExtendedStats_OnEvent(event)
            </OnEvent>
        </Scripts>
    </Frame>
</Ui>
